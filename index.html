<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ريدان للمندي - قائمة الطعام</title>
  <script src="https://cdn.tailwindcss.com"></script> 
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@500;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Tajawal', sans-serif;
    }
    .shake {
      animation: shake 0.8s cubic-bezier(.36,.07,.19,.97) both;
    }

    @keyframes shake {
      0% { transform: translate(1px, 1px) rotate(0deg); }
      10% { transform: translate(-1px, -2px) rotate(-1deg); }
      20% { transform: translate(-3px, 0px) rotate(1deg); }
      30% { transform: translate(3px, 2px) rotate(0deg); }
      40% { transform: translate(1px, -1px) rotate(1deg); }
      50% { transform: translate(-1px, 2px) rotate(-1deg); }
      60% { transform: translate(-3px, 1px) rotate(0deg); }
      70% { transform: translate(3px, 1px) rotate(-1deg); }
      80% { transform: translate(-1px, -1px) rotate(1deg); }
      90% { transform: translate(1px, 2px) rotate(0deg); }
      100% { transform: translate(1px, -2px) rotate(-1deg); }
    }
  </style>
</head>
<body class="bg-gradient-to-br from-pink-50 to-purple-50 min-h-screen p-6">

<!-- إشعارات -->
<div id="cartNotification" class="hidden fixed top-4 left-4 bg-green-500 text-white px-4 py-2 rounded shadow-lg animate-bounce z-50">تم تقديم الطلب!</div>
<div id="acceptedNotification" class="hidden fixed top-4 right-4 bg-blue-500 text-white px-4 py-2 rounded shadow-lg animate-pulse z-50">✅ تم قبول طلبك!</div>
<div id="rejectedNotification" class="hidden fixed top-4 right-4 bg-red-500 text-white px-4 py-2 rounded shadow-lg animate-pulse z-50">❌ تم رفض طلبك!</div>

<!-- شعار الاهتزاز عند استقبال إشعار -->
<div id="statusShake" class="hidden fixed top-4 left-4 flex items-center space-x-2 space-x-reverse">
  <img src="https://via.placeholder.com/40x40?text=Raidan" alt="شعار" class="rounded-full shadow-md">
  <span class="font-bold text-sm">RIDAN MANDI</span>
</div>

<!-- القائمة الرئيسية -->
<div class="max-w-md mx-auto bg-white shadow-xl rounded-lg p-6 mb-24">
  <h1 class="text-3xl font-bold text-center mb-2 text-pink-700">مطعم ريدان للمندي</h1>
  <p class="text-center text-gray-600 mb-6">اختر أصنافك المفضلة</p>

  <!-- الدجاج -->
  <h2 class="mt-6 font-bold text-lg text-gray-800">أطباق الدجاج</h2>
  <div class="space-y-4 mt-2">
    <MenuItem label="دجاج مندي" price="33 AED" name="ChickenMandi" />
    <MenuItem label="دجاج بخاري" price="35 AED" name="ChickenBukhari" />
    <MenuItem label="دجاج زربيان" price="33 AED" name="ChickenZarbain" />
    <MenuItem label="دجاج مدخن" price="33 AED" name="ChickenMadfoon" />
    <MenuItem label="دجاج محمر" price="40 AED" name="ChickenMohamer" />
    <MenuItem label="دجاج كبسة" price="33 AED" name="ChickenKabsa" />
    <MenuItem label="دجاج عولقة" price="33 AED" name="ChickenAwalag" />
    <MenuItem label="دجاج مدغوت" price="35 AED" name="ChickenMadghoot" />
  </div>

  <!-- اللحم -->
  <h2 class="mt-6 font-bold text-lg text-gray-800">أطباق اللحم</h2>
  <div class="space-y-4 mt-2">
    <MenuItem label="لحم مندي" price="50 AED" name="MuttonMandi" />
    <MenuItem label="لحم بخاري" price="60 AED" name="MuttonBukhari" />
    <MenuItem label="لحم زربيان" price="55 AED" name="MuttonZarbain" />
    <MenuItem label="لحم مدخن" price="55 AED" name="MuttonMadfoon" />
    <MenuItem label="لحم محمر" price="60 AED" name="MuttonMohamer" />
    <MenuItem label="لحم كبسة" price="60 AED" name="MuttonKabsa" />
    <MenuItem label="لحم مدغوت" price="60 AED" name="MuttonMadghoot" />
    <MenuItem label="لحم هندي" price="60 AED" name="MuttonHanith" />
  </div>

  <!-- السمك -->
  <h2 class="mt-6 font-bold text-lg text-gray-800">أطباق السمك</h2>
  <div class="space-y-4 mt-2">
    <MenuItem label="سمك مقلي / مشوي" price="50 AED" name="FishFryGrill" />
    <MenuItem label="سمك تارش + شاري" price="50 AED" name="FishTarsheShari" />
    <MenuItem label="سمك ملكي" price="50 AED" name="FishKing" />
    <MenuItem label="سمك مدخن" price="50 AED" name="FishMadfoon" />
  </div>

  <button onclick="submitOrder()" class="mt-6 w-full py-3 bg-pink-600 text-white rounded-lg hover:bg-pink-700 transition">إرسال الطلب</button>
</div>

<!-- سلة الطلبات -->
<div id="shoppingCart" class="fixed bottom-4 right-4 bg-white border rounded-lg p-4 shadow-lg w-64 max-h-64 overflow-y-auto">
  <h3 class="font-bold mb-2">سلة المشتريات</h3>
  <ul id="cartItems" class="space-y-1"></ul>
  <p id="totalPrice" class="mt-2 font-semibold text-right">الإجمالي: 0 AED</p>
</div>

<script>
  // أسعار الأطباق
  const prices = {
    ChickenMandi: 33,
    ChickenBukhari: 35,
    ChickenZarbain: 33,
    ChickenMadfoon: 33,
    ChickenMohamer: 40,
    ChickenKabsa: 33,
    ChickenAwalag: 33,
    ChickenMadghoot: 35,

    MuttonMandi: 50,
    MuttonBukhari: 60,
    MuttonZarbain: 55,
    MuttonMadfoon: 55,
    MuttonMohamer: 60,
    MuttonKabsa: 60,
    MuttonMadghoot: 60,
    MuttonHanith: 60,

    FishFryGrill: 50,
    FishTarsheShari: 50,
    FishKing: 50,
    FishMadfoon: 50
  };

  let cart = {};
  let total = 0;

  function MenuItem({ label, price, name }) {
    const container = document.createElement('div');
    container.className = 'flex items-center justify-between border-b pb-2';

    container.innerHTML = `
      <div>
        <p class="font-medium">${label}</p>
        <p class="text-sm text-gray-500">${price}</p>
      </div>
      <input type="number" id="${name}" min="0" value="0" onchange="updateCart('${name}')" class="w-16 text-center border rounded">
    `;
    document.querySelector('.space-y-4').appendChild(container);
  }

  window.MenuItem = MenuItem;

  function updateCart(name) {
    const qty = parseInt(document.getElementById(name).value) || 0;
    cart[name] = qty;
    renderCart();
  }

  function renderCart() {
    const cartItems = document.getElementById('cartItems');
    cartItems.innerHTML = '';
    total = 0;

    Object.entries(cart).forEach(([name, qty]) => {
      if (qty > 0) {
        const itemTotal = qty * prices[name];
        total += itemTotal;

        const li = document.createElement('li');
        li.textContent = `${name}: ${qty} × ${prices[name]} AED = ${itemTotal} AED`;
        cartItems.appendChild(li);
      }
    });

    document.getElementById('totalPrice').textContent = `الإجمالي: ${total} AED`;
  }

  function submitOrder() {
    const orders = JSON.parse(localStorage.getItem('raidanOrders') || '[]');

    const newOrder = {};
    Object.keys(cart).forEach(key => {
      if (cart[key] > 0) newOrder[key] = cart[key];
    });

    if (Object.keys(newOrder).length === 0) {
      alert("يرجى اختيار كمية من أحد الأطباق.");
      return;
    }

    orders.push(newOrder);
    localStorage.setItem('raidanOrders', JSON.stringify(orders));

    // حفظ ID الطلب الأخير
    const orderId = orders.length - 1;
    localStorage.setItem('lastOrderId', orderId);

    // إشعار
    const notif = document.getElementById('cartNotification');
    notif.classList.remove('hidden');
    setTimeout(() => notif.classList.add('hidden'), 3000);
  }

  // مراقبة حالة الطلب (قبول أو رفض)
  setInterval(() => {
    const orderId = localStorage.getItem('lastOrderId');
    if (!orderId) return;

    const status = localStorage.getItem(`orderStatus_${orderId}`);
    const acceptedNotif = document.getElementById('acceptedNotification');
    const rejectedNotif = document.getElementById('rejectedNotification');
    const statusShake = document.getElementById('statusShake');

    if (status === 'accepted') {
      acceptedNotif.classList.remove('hidden');
      statusShake.classList.add('shake');
      setTimeout(() => {
        acceptedNotif.classList.add('hidden');
        statusShake.classList.remove('shake');
      }, 3000);
      localStorage.removeItem(`orderStatus_${orderId}`);
    } else if (status === 'rejected') {
      rejectedNotif.classList.remove('hidden');
      statusShake.classList.add('shake');
      setTimeout(() => {
        rejectedNotif.classList.add('hidden');
        statusShake.classList.remove('shake');
      }, 3000);
      localStorage.removeItem(`orderStatus_${orderId}`);
    }
  }, 2000);
</script>
</body>
</html>